# ğŸ¯ ç®¡ç†å‘˜ç™»å½•é—®é¢˜ - æœ€ç»ˆè§£å†³æ–¹æ¡ˆ

## é—®é¢˜æ€»ç»“

ç»è¿‡æ·±å…¥è¯Šæ–­ï¼Œé—®é¢˜å®šä½ä¸ºï¼š
- âœ… åç«¯é…ç½®æ­£ç¡®ï¼ˆdatabase.host = shortdrama-mysqlï¼‰
- âœ… æ•°æ®åº“ä¸­æœ‰adminç”¨æˆ·ï¼ˆ2ä¸ªï¼‰
- âŒ ä½†bcryptå¯†ç éªŒè¯æ€»æ˜¯å¤±è´¥

## æ ¹æœ¬åŸå› 

**bcrypt hashä¸åŒ¹é…** - æ•°æ®åº“ä¸­çš„hashå’Œåç«¯çš„CheckPasswordå‡½æ•°éªŒè¯ä¸é€šè¿‡ã€‚

å¯èƒ½çš„åŸå› ï¼š
1. hashç”Ÿæˆæ—¶çš„costä¸éªŒè¯æ—¶ä¸åŒ
2. hashå­—ç¬¦ä¸²åœ¨ä¼ é€’è¿‡ç¨‹ä¸­è¢«æŸåï¼ˆshellè½¬ä¹‰é—®é¢˜ï¼‰
3. bcryptåº“ç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜

## è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šå°è¯•å·²çŸ¥çš„hashï¼ˆæ¨èï¼‰â­

è¿è¡Œä»¥ä¸‹è„šæœ¬ï¼Œå®ƒä¼šå°è¯•å¤šä¸ªé¢„ç”Ÿæˆçš„bcrypt hashï¼š

```bash
cd /Users/kis/data/cursor_test
./try-known-hashes.sh
```

å¦‚æœæŸä¸ªhashæˆåŠŸï¼Œè®°å½•ä¸‹æ¥ä¾›ä»¥åä½¿ç”¨ã€‚

### æ–¹æ¡ˆ2ï¼šæŸ¥çœ‹è¯¦ç»†æ—¥å¿—

æ£€æŸ¥åç«¯æ—¥å¿—ä¸­çš„å…·ä½“é”™è¯¯ï¼š

```bash
docker logs shortdrama-backend 2>&1 | grep -A 5 "admin/auth/login"
```

### æ–¹æ¡ˆ3ï¼šä¸´æ—¶ä½¿ç”¨ç®€å•å¯†ç 

ä¿®æ”¹å¯†ç ä¸º"123456"ï¼ˆä»…ç”¨äºå¼€å‘æµ‹è¯•ï¼‰ï¼š

```bash
# 1. ç”Ÿæˆ"123456"çš„hash
# 2. æ›´æ–°æ•°æ®åº“
# 3. ç”¨"123456"ç™»å½•
```

## åç»­å»ºè®®

ä¸€æ—¦ç™»å½•æˆåŠŸï¼š
1. åœ¨ç®¡ç†åå°ä¿®æ”¹å¯†ç 
2. ä½¿ç”¨åç«¯çš„å¯†ç ä¿®æ”¹åŠŸèƒ½ç”Ÿæˆæ–°hash
3. è¿™æ ·å°±èƒ½ç¡®ä¿hashå’ŒéªŒè¯é€»è¾‘å®Œå…¨ä¸€è‡´

## æ‰€æœ‰åˆ›å»ºçš„è¾…åŠ©è„šæœ¬

```
./complete-diagnosis.sh     - å®Œæ•´è¯Šæ–­
./try-known-hashes.sh       - å°è¯•å¤šä¸ªhash
./debug-insert.sh           - è°ƒè¯•æ•°æ®åº“æ’å…¥
./ensure-admin-exists.sh    - ç¡®ä¿adminå­˜åœ¨
./test-login-now.sh         - æµ‹è¯•ç™»å½•
```

## è”ç³»ä¿¡æ¯

å¦‚æœé—®é¢˜ä»æœªè§£å†³ï¼Œè¯·æä¾›ï¼š
1. `complete-diagnosis.sh` çš„å®Œæ•´è¾“å‡º
2. `docker logs shortdrama-backend --tail 50` çš„è¾“å‡º
3. æ•°æ®åº“ä¸­admin_usersè¡¨çš„å®Œæ•´è®°å½•

---

**ç«‹å³è¡ŒåŠ¨**: è¿è¡Œ `./try-known-hashes.sh` ğŸš€
